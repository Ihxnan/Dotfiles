#!/usr/bin/env bash

set -euo pipefail

mkdir -p ~/WorkSpace/Algorithm
mkdir -p ~/.mpd/playlists

sudo pacman -Syyu --noconfirm

sudo pacman -S \
    base-devel \
    sudo \
    git \
    curl \
    wget \
    openssh \
    unzip \
    neovim \
    vim \
    gcc \
    gdb \
    clang \
    nodejs \
    npm \
    yarn \
    lua51 \
    fzf \
    paru \
    ttf-jetbrains-mono \
    ttf-jetbrains-mono-nerd \
    fcitx5-im \
    fcitx5-chinese-addons \
    mpv \
    mpd \
    mpc \
    ncmpcpp \
    ffmpeg \
    i3-wm \
    i3blocks \
    picom \
    rofi \
    dunst \
    polybar \
    variety \
    feh \
    xorg-xinit \
    xorg-xrandr \
    alacritty \
    fish \
    zsh \
    ranger \
    lolcat \
    chromium \
    --noconfirm 

if [ -f "./scripts/setup" ]; then
    echo ">>> 执行 setup 脚本..."
    bash ./scripts/setup
else
    echo "警告: ./scripts/setup 脚本不存在，已跳过。"
fi

echo ">>> 所有配置已完成！请重启系统以应用所有更改。"
